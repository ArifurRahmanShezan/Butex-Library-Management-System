<div class="container">

  <!-- Tabs -->
  <div class="tabs">
    <button [class.active]="activeTab === 'edit'" (click)="setTab('edit')">
      Edit Catalog Record
    </button>
    <button [class.active]="activeTab === 'delete'" (click)="setTab('delete')">
      Delete Catalog Record
    </button>
  </div>

  <!-- Edit Tab -->
  <div *ngIf="activeTab === 'edit'" class="card">
    <h2>Edit Catalog Record</h2>
    <form (ngSubmit)="updateRecord()" #editForm="ngForm">
      <label>Record ID *</label>
      <input type="text" name="editRecordId" [(ngModel)]="editRecordId" placeholder="Enter Record ID" required />

      <label>Edit Fields (comma separated)</label>
      <textarea name="editFields" [(ngModel)]="editFields" rows="4" placeholder="Title, Author, ISBN, etc."
        required></textarea><br>

      <button type="submit" [disabled]="!editForm.form.valid">
        Update Record
      </button>
    </form>
  </div>

  <!-- Delete Tab -->
  <div *ngIf="activeTab === 'delete'" class="card">
    <h2>Delete Catalog Record</h2>
    <form (ngSubmit)="deleteRecord()" #deleteForm="ngForm">
      <label>Record ID *</label>
      <input type="text" name="deleteRecordId" [(ngModel)]="deleteRecordId" placeholder="Enter Record ID" required />

      <div class="checkbox-wrapper">
        <input type="checkbox" id="confirmDelete" name="confirmDelete" [(ngModel)]="confirmDelete" required />
        <label for="confirmDelete">Confirm Deletion</label>
      </div>


      <button type="submit" [disabled]="!deleteForm.form.valid">
        Delete Record
      </button>
    </form>
  </div>

  <!-- Audit Log Table -->
  <div class="card full-width">
    <h2>Audit Log</h2>
    <table *ngIf="auditLog.length > 0; else emptyLog">
      <thead>
        <tr>
          <th>Action</th>
          <th>Record ID</th>
          <th>Details</th>
          <th>Date & Time</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let log of auditLog">
          <td>{{ log.action }}</td>
          <td>{{ log.recordId }}</td>
          <td>{{ log.details }}</td>
          <td>{{ log.timestamp }}</td>
        </tr>
      </tbody>
    </table>

    <ng-template #emptyLog>
      <p class="empty-msg">No audit logs yet.</p>
    </ng-template>
  </div>
</div>