<div class="tw-font-sans tw-bg-gray-100 tw-min-h-screen tw-p-6">
  <div class="tw-bg-white tw-rounded-2xl tw-shadow-xl tw-max-w-7xl tw-mx-auto tw-p-10">
    <h2 class="tw-text-2xl tw-font-semibold tw-text-gray-800 tw-mb-6">Bibliography Record Management</h2>

    <!-- Toolbar -->
    <div class="tw-flex tw-justify-between tw-items-center tw-mb-4">
      <h3 class="tw-text-lg tw-font-semibold">Records</h3>
      <button
        class="tw-bg-green-600 tw-text-white tw-rounded-md tw-px-4 tw-py-2 hover:tw-bg-green-700 tw-transition"
        (click)="openModal()"
      >
        + Add Record
      </button>
    </div>

    <!-- Records Table -->
    <div class="tw-overflow-x-auto">
      <table class="tw-w-full tw-border-collapse tw-rounded-lg tw-shadow-sm">
        <thead class="tw-bg-gray-100 tw-text-gray-700 tw-font-semibold">
          <tr>
            <th class="tw-px-4 tw-py-3">#</th>
            <th class="tw-px-4 tw-py-3">Record ID</th>
            <th class="tw-px-4 tw-py-3">Title</th>
            <th class="tw-px-4 tw-py-3">Author</th>
            <th class="tw-px-4 tw-py-3">Publisher</th>
            <th class="tw-px-4 tw-py-3">Year</th>
            <th class="tw-px-4 tw-py-3">Format</th>
            <th class="tw-px-4 tw-py-3">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let rec of records; let i = index"
            class="hover:tw-bg-gray-50"
          >
            <td class="tw-px-4 tw-py-3">{{ i + 1 }}</td>
            <td class="tw-px-4 tw-py-3">{{ rec.id }}</td>
            <td class="tw-px-4 tw-py-3">{{ rec.title }}</td>
            <td class="tw-px-4 tw-py-3">{{ rec.author }}</td>
            <td class="tw-px-4 tw-py-3">{{ rec.publisher }}</td>
            <td class="tw-px-4 tw-py-3">{{ rec.publicationYear }}</td>
            <td class="tw-px-4 tw-py-3">{{ rec.format }}</td>
            <td class="tw-flex tw-gap-2 tw-px-4 tw-py-3">
              <button
                class="tw-bg-blue-600 tw-text-white tw-rounded-md tw-px-3 tw-py-1 hover:tw-bg-blue-700"
                (click)="editRecord(rec)"
              >
                Edit
              </button>
              <button
                class="tw-bg-red-600 tw-text-white tw-rounded-md tw-px-3 tw-py-1 hover:tw-bg-red-700"
                (click)="deleteRecord(rec.id)"
              >
                Delete
              </button>
            </td>
          </tr>
          <tr *ngIf="records.length === 0">
            <td
              colspan="8"
              class="tw-text-center tw-text-gray-500 tw-py-5"
            >
              No records found.
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Modal -->
    <div
      *ngIf="showModal"
      class="tw-fixed tw-inset-0 tw-bg-black/60 tw-flex tw-items-center tw-justify-center tw-z-50 "
    >
      <div
        class="tw-bg-white tw-rounded-lg tw-shadow-2xl tw-w-[700px] tw-p-3 tw-relative tw-max-h-[90vh] tw-overflow-y-auto"
      >
        <span
          (click)="closeModal()"
          class="tw-absolute tw-top-3 tw-right-4 tw-text-2xl tw-cursor-pointer tw-text-gray-500"
          >&times;</span
        >

        

        <form (ngSubmit)="saveRecord()" #recordForm="ngForm" class="tw-space-y-4">
          <!-- Section -->
          <div class="tw-bg-gray-50 tw-border tw-border-gray-200 tw-rounded-md tw-p-4">
            <h4 class="tw-font-semibold tw-text-blue-700 tw-mb-2">
             {{ editingRecord ? 'Edit Record' : 'Add Record' }} Information
            </h4>

            <div class="tw-grid tw-grid-cols-2 tw-gap-4">
              <div>
                <label class="tw-block tw-font-medium">Format *</label>
                <select
                  [(ngModel)]="record.format"
                  name="format"
                  required
                  class="tw-w-full tw-border tw-border-gray-300 tw-rounded-md tw-px-3 tw-py-2 focus:tw-ring-2 focus:tw-ring-blue-500"
                >
                  <option value="MARC21">MARC21</option>
                  <option value="DUBLIN_CORE">Dublin Core</option>
                  <option value="SERIAL">Serial</option>
                </select>
              </div>

              <div>
                <label class="tw-block tw-font-medium">Title *</label>
                <input
                  [(ngModel)]="record.title"
                  name="title"
                  required
                  class="tw-w-full tw-border tw-border-gray-300 tw-rounded-md tw-px-3 tw-py-2 focus:tw-ring-2 focus:tw-ring-blue-500"
                />
              </div>

              <div>
                <label class="tw-block tw-font-medium">Author *</label>
                <input
                  [(ngModel)]="record.author"
                  name="author"
                  required
                  class="tw-w-full tw-border tw-border-gray-300 tw-rounded-md tw-px-3 tw-py-2 focus:tw-ring-2 focus:tw-ring-blue-500"
                />
              </div>

              <div>
                <label class="tw-block tw-font-medium">Publisher</label>
                <input
                  [(ngModel)]="record.publisher"
                  name="publisher"
                  class="tw-w-full tw-border tw-border-gray-300 tw-rounded-md tw-px-3 tw-py-2 focus:tw-ring-2 focus:tw-ring-blue-500"
                />
              </div>

              <div>
                <label class="tw-block tw-font-medium">ISBN *</label>
                <input
                  [(ngModel)]="record.isbn"
                  name="isbn"
                  required
                  class="tw-w-full tw-border tw-border-gray-300 tw-rounded-md tw-px-3 tw-py-2 focus:tw-ring-2 focus:tw-ring-blue-500"
                />
              </div>

              <div>
                <label class="tw-block tw-font-medium">Publication Year</label>
                <input
                  type="number"
                  [(ngModel)]="record.publicationYear"
                  name="publicationYear"
                  class="tw-w-full tw-border tw-border-gray-300 tw-rounded-md tw-px-3 tw-py-2 focus:tw-ring-2 focus:tw-ring-blue-500"
                />
              </div>

              <div class="tw-col-span-2">
                <label class="tw-block tw-font-medium">Cataloging Template *</label>
                <select
                  [(ngModel)]="record.catalogingTemplate.id"
                  name="templateId"
                  required
                  class="tw-w-full tw-border tw-border-gray-300 tw-rounded-md tw-px-3 tw-py-2 focus:tw-ring-2 focus:tw-ring-blue-500"
                >
                  <option value="">Select Template</option>
                  <option *ngFor="let tmpl of templates" [value]="tmpl.id">
                    {{ tmpl.name }}
                  </option>
                </select>
              </div>

              <div class="tw-col-span-2">
                <label class="tw-block tw-font-medium">Raw Content</label>
                <textarea
                  [(ngModel)]="record.rawContent"
                  name="rawContent"
                  class="tw-w-full tw-border tw-border-gray-300 tw-rounded-md tw-px-3 tw-py-2 tw-min-h-[100px] focus:tw-ring-2 focus:tw-ring-blue-500"
                ></textarea>
              </div>
            </div>
          </div>

          <!-- Modal Actions -->
          <div class="tw-flex tw-justify-end tw-gap-3 tw-mt-6">
            <button
              type="button"
              (click)="closeModal()"
              class="tw-bg-gray-500 tw-text-white tw-rounded-md tw-px-4 tw-py-2 hover:tw-bg-gray-600"
            >
              Cancel
            </button>
            <button
              type="submit"
              class="tw-bg-green-600 tw-text-white tw-rounded-md tw-px-4 tw-py-2 hover:tw-bg-green-700"
            >
              {{ editingRecord ? 'Update' : 'Save' }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
