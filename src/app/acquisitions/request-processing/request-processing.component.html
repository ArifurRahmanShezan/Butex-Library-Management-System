<h2>Library Book Request Management</h2>

<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;">
  <h3>Book Requests</h3>
  <button class="btn-success" (click)="openModal()">Add Request</button>
</div>

<!-- Requests Table -->
<table>
  <thead>
    <tr>
      <th>#</th>
      <th>Title</th>
      <th>Author</th>
      <th>Publisher</th>
      <th>Year</th>
      <th>ISBN</th>
      <th>Requester</th>
      <th>Email</th>
      <th>Department</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let req of requests; let i = index">
      <td>{{ i + 1 }}</td>
      <td>{{ req.title }}</td>
      <td>{{ req.author }}</td>
      <td>{{ req.publisher }}</td>
      <td>{{ req.publicationYear }}</td>
      <td>{{ req.isbn }}</td>
      <td>{{ req.requesterName }}</td>
      <td>{{ req.requesterEmail }}</td>
      <td>{{ req.department }}</td>
      <td>{{ req.notes }}</td>
    </tr>
  </tbody>
</table>

<!-- Modal -->
<div id="modal" [ngStyle]="{ display: showModal ? 'flex' : 'none' }">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Add Book Request</h3>
      <span class="close-btn" (click)="closeModal()">Ã—</span>
    </div>

    <form [formGroup]="requestForm" (ngSubmit)="onSubmit()">
      <!-- Section 1 -->
      <div class="form-section">
        <h4>Book Details</h4>
        <label>Title</label>
        <input formControlName="title" type="text" placeholder="Enter book title" />

        <label>Author</label>
        <input formControlName="author" type="text" placeholder="Enter author name" />

        <label>Publisher</label>
        <input formControlName="publisher" type="text" placeholder="Publisher name" />

        <label>Publication Year</label>
        <input formControlName="publicationYear" type="number" placeholder="e.g. 2024" />

        <label>ISBN</label>
        <input formControlName="isbn" type="text" placeholder="Enter ISBN" />
      </div>

      <!-- Section 2 -->
      <div class="form-section">
        <h4>Requester Details</h4>
        <label>Name</label>
        <input formControlName="requesterName" type="text" placeholder="Your name" />

        <label>Email</label>
        <input formControlName="requesterEmail" type="email" placeholder="you@example.com" />

        <label>Department</label>
        <input formControlName="department" type="text" placeholder="Department name" />

        <label>Notes</label>
        <textarea formControlName="notes" placeholder="Purpose or remarks"></textarea>
      </div>

      <div class="modal-actions">
        <button type="button" class="btn-secondary" (click)="closeModal()">Cancel</button>
        <button type="submit" class="btn-success" [disabled]="isSubmitting || requestForm.invalid">
          {{ isSubmitting ? 'Submitting...' : 'Submit Request' }}
        </button>
      </div>
    </form>
  </div>
</div>
